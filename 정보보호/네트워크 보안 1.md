# 네트워크 보안

<br/>

Dos(Denial of Service) 

* 서비스 거부 공격이란 뜻으로, 공격자가 한 지점에서 공격을 진행한다.
* 패킷의 처리 로직에 문제를 일으켜 오작동을 유발하는 취약점 공격형과 시스템의 자원을 소모시키는 자원 고갈 공격형이 있다.

<br/>

**1. 보잉크/봉크/티어드롭 공격**

* TCP 헤더 안에 있는 시퀀스 넘버를 패킷 재전송과 재조합에 과부하가 걸리도록 속인다.
![화면 캡처 2022-09-24 150412](https://user-images.githubusercontent.com/93998875/192083059-48245f07-29bd-454c-a407-fd0ed9901cca.png)
* 클라이언트가 시퀀스넘버가 1인 100바이트짜리 패킷을 서버에 보낸다고 가정하면, 서버는 100바이트까지 잘 받았고   
  그 다음인 101번째 바이트부터 전송해달라는 의미로 ACK가 101인 패킷을 회신한다.   
  그렇게 클라이언트는 시퀀스넘버가 101인 100바이트짜리 패킷을 다시 보내고를 반복하면서 서버측의 수신 버퍼에 패킷들이 쌓이면     
  시퀀스넘버를 기반으로 하나의 메시지로 통합해서 서버측 애플리케이션으로 건네주는 원리이다.
* 하지만 위의 그림처럼 시퀀스 넘버가 조작된 패킷의 흐름은 공격 대상은 절대 해결할 수 없는 것이고, 과부하로 작동을 멈추게 된다.
* 과부하가 걸리거나 계속 반복되는 패킷을 무시하고 버리도록 패치 관리를 통해 극복한다.

<br/>

**2. 랜드 공격**

* 패킷을 전송할 때, 송신처 IP주소와 수신처 IP주소를 똑같이 해서 공격 대상에게 보내는 것이다.
* 물론 둘 다 공격대상의 IP주소여야겠지
* 이 패깃을 받은 시스템(공격 대상)은 최초의 패킷일테니 SYN일 것이고, 이 패킷의 송신처 IP주소를 보고 SYN+ACK를 회신할 것이다.
* 하지만 회신한 곳은 자기 자신이기 때문에 계속 반복처리 될 것이고 동시 사용자 수를 점유하고 CPU 부하를 올려서 시스템의 능률을 저하시킨다.
* 공격 대상 시스템의 소켓 즉, 메모리를 계속 잡아먹겠지.

<br/>

**3. 죽음의 핑 공격**
* 네트워크 연결 상태를 점검하는 ping 명령을 보낼 때, 공격 대상에게 패킷을 최대한 길게 보내고자한다면   
  여러 개의 패킷으로 나누어 보내야 한다.
* 대량의 작은 패킷을 수신하느라 네트워크가 마비된다.
* 이를 막으려면 내부 네트워크에 들어오기 전 거치는 방화벽에서 ping이 사용하는 ICMP 프로토콜을 차단해야 한다.

<br/>

**4. SYN 플러딩 공격**
* 동시 사용자 수 제한을 이용한 것으로, 존재하지 않는 클라이언트가 서버별로 한정된 접속 가능 공간에 접속한 것처럼 속여  
  다른 사용자가 서비스를 제공받지 못하게 한다.
![화면 캡처 2022-09-24 150431](https://user-images.githubusercontent.com/93998875/192083639-b4482df2-5083-4f1c-b1b0-9ac0d6e1b04a.png)
* 3 웨이-핸드셰이킹의 마지막 단계인 클라이언트측에서 ACK를 보내는 과정이 만약에 없다면, 서버측은 타임아웃 값 전까지는  
  기다려야하므로 그동안 수많은 SYN 패킷을 보내면 가용되는 동시 접속자 수를 모두 SYN Received 상태로 만든다.
* SYN Received의 상태 지속시간을, 즉 타임아웃 값을 줄이면 해결할 수 있다.

<br/>

**5. HTTP를 이용한 공격**
* GET 플러딩 공격 : 공격 대상에 HTTP의 GET메소드를 통해 특정 페이지를 무한대로 실행하는 공격

* CC 공격 : HTTP 1.1버전의 CC 헤더를 조작하여, 캐시서버를 거치지 않고 웹 서버에 직접 보냄으로써 웹 서비스의 부하를 증가시킨다.

* 동적 리퀘스트 플러딩 공격 : 지속적으로 요청 페이지를 변경하여 웹 페이지를 요청하는 기법

* 슬로 HTTP 헤더 DoS 공격 : 웹 서버는 HTTP 메시지의 헤더와 바디를 개행문자(\r 등)으로 구분하는 데, 공격자 측에서 개행문자를  
  생략해서 보낸다면 웹 서버는 HTTP 헤더정보를 다 수신하지 않은 것으로 판단하여 연결을 유지한다.  
  그 결과 시스템 자원을 소비시켜 다른 클라이언트의 정상적인 서비스를 방해한다.
  
* 슬로 POST 공격 : 리퀘스트 메시지 헤더의 Content-Length 필드에 임의의 큰 값을 설정하여 전송하면 웹 서버는  
  해당 크기의 메시지를 다 받을때까지 연결을 유지한다.   
  공격자는 소량의 데이터를 느린속도로 전송하여 웹 서버와의 커넥션이 장시간 유지되게 함으로써 서버의 자원을 잠식한다.

<br/>

**6. 스머프 공격**
* ICMP 패킷과 다이렉트 브로드캐스트 방식을 이용하여 네트워크를 공격하는 원리  
<br/>

여기서 잠깐  
<br/>

**ICMP란?** 해당 호스트가 없거나, 해당 포트에 대기중에 서버 프로그램이 없는 등의 에러 상황이 발생할 경우  
IP 헤더의 송신처 IP주소 필드가 나타내는 송신처로 에러 메시지를 보내는 역할을 하는 프로토콜이다.  
이를 받게 된 송신처에서는 수신처에 대한 정보를 대충이나마 확인이 가능한 것이다.  
통신 유무 확인 시 자주 쓰는 윈도우의 ping 같은 경우도 ICMP 프로토콜을 이용한 방법이다.
<br/>

**다이렉트 브로드캐스트란?** 라우터를 넘어서 다른 네트워크에 브로드캐스트를 하는 것이다.  
예를 들어 172.16.0.255 같이 네트워크 부분은 대상을 적고, 호스트 부분을 모든 비트를 1로 함으로써 나타낸다.
<br/>

![화면 캡처 2022-09-24 150530](https://user-images.githubusercontent.com/93998875/192084787-9440d4ea-3cc2-4883-9a88-73f6750ad316.png)
* 공격자가 172.16.0.0 네트워크로 ICMP 패킷을 보내는데, 송신처 IP주소를 공격 대상의 IP주소로 위조하여 보낸다.
* 이를 브로드캐스트로 받은 해당 네트워크 내의 모든 호스트들은 ICMP Reply를 송신처 IP주소를 참고하여 공격 대상으로 싹 다 보낸다.
* 이를 받은 공격 대상은 수많은 패킷을 동시에 받게 되어 과부하 상태가 된다.
* 네트워크를 당당하는 라우터에서 다이렉트 브로드캐스트 방식을 막음으로써 해결할 수 있다.

<br/><br/>

DDos(Distributed Denial of Service)

* 분산 서비스 거부 공격을 의미한다.
* 위의 소개한 방식들을 여러 대의 PC가 동시에 수행한다고 생각하자.
* 악성코드를 전파시켜서 좀비 PC를 만들고, 이들의 집합은 봇넷들을 정해진 스케줄에 따라 일제히 공격 명령을 내린다.
![화면 캡처 2022-09-24 150624](https://user-images.githubusercontent.com/93998875/192085040-e51eb08b-4a88-4271-8392-3d45dbca8fec.png)



